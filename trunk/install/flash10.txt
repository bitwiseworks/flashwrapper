[ Flash 10 Plugin wrapper for eComStation Technology Preview ]

This is a Technology Preview of the Flash 10 Plugin wrapper for
eComStation. There is no support and no need for feedback. It is
intended to show the progress of this product and to give you an 
early experience of being able to use websites implementing the 
latest Flash content.

It is available to anyone with an active Software Subscription 
Services for eComStation, via their download-area at the Mensys 
Online Shop. http://www.mensys.net/login/


Introduction
============

The official Flash 5 included with eComStation is outdated and does not
support video playback. The unoffocial Flash 7/9 release which can be
found on the internet does not work on a lot of websites as it identifies 
itself as Flash 9 but can only display Flash 7 content.

With the new release of Flash 10 we have up-to-date Flash support for 
eComStation. This release also supports proper rendering of Flash 10 text
elements and Flash keyboard input works.

Note: This code should not be used on production systems. 
      Please make sure to have a proper backup of your system.


Requirements
============

- Flash 10 for eComStation requires eComStation version 1.2 or higher.  
  On older versions of eComStation the Flash plugin will not work.

- Before installing the plugin please shutdown all your web browser
  sessions.  

- On eComStation the default plugin browser plugin path is defined by 
  the "SET MOZ_PLUGIN_PATH=" variable set in the config.sys.

  If the MOZ_PLUGIN_PATH is not found the installer will try to find the
  web browser used by querying the OS2.INI file for the value
  WPURLSETTINGS->DefaultBrowserExe.  It will then copy your plugin file to
  %browser-direcytory%\plugins.

  If the correct path could not be found, the installer will ask you to 
  provide the path.

- When Flash 5 from Innotek (included with eComStation by default) or the
  unofficial Flash 7/9 release is found, The DLL's will be renamed so the
  web browser will no longer load the older versions (they will *not* be
  deleted).  
  See the section "How to uninstall Flash 10" for more details.

- This wrapper is using a customized ODIN build to run the Windows version
  of the Flash 10 plugin. The ODIN build that is installed is not referenced
  in your config.sys and can coexist with other builds.

* Supported web browsers:

- Firefox 2.0 or higher, including Firefox 3.x
- Seamonkey 
- PmW-Fx (builds of the Firefox web browser by Peter Weilbacher)

  Other web browsers, like for example Netscape 4.61, are not supported.

* Supported video drivers:

- SNAP build 3.1.8 
- The Panorama video driver

  Both drivers ship with eComStation 1.2R and up.

* Supported audio drivers:

- UNIAUD audio driver
- The SB Live driver from Sander van Leeuwen
- The Analog Devices AC 97 driver
- The Cmedia 8738 driver by Rudiger Ihle

  Other audio device drivers may have problems with the audio buffers sent
  to the audio driver by the ODIN layer used by Flash.

* Kernel:

It is recommended to use eComStation with kernel 104a SMP/_W4. Higher 
revisions of the kernel are not recommended.

With the bldlevel.exe command you should have something like this:

[C:\]bldlevel os2krnl
Signature:       @#IBM:14.104a#@_SMP  IBM OS/2 Kernel
Vendor:          IBM
Revision:        14.104
File Version:    14.104
Description:     _SMP  IBM OS/2 Kernel


Known limitations
=================

While this Flash build is reasonably stable it can sometimes crash your 
web browser and in some occasions block the user input or hang the desktop.  
If your keyboard and mouse input is blocked try to kill your web browser with 
a process killer like Top (available via CAD handler in eComStation) or 
Watchcat. As a last resort you may need to reboot your system by pressing 
Ctrl-Alt-Del.

* Check registry:

If your web browser crashes at startup or loading a website with Flash 
content, check with regedit2.exe that the key Flash10_plugin has the proper 
keywords set.
PluginWrapperPath= and AdobePluginPath= should be set to the directory
where your browser plugins are located.  
OdinPath= points to where the ODIN DLL's are installed for the ODIN build 
used by Flash 10. 

* Using SMP:

When running a system with the SMP kernel and having the /SMP switch
defined on the PSD=ACPI.PSD in your config.sys, this might result in
rendering problems with the Panorama video driver, like:

- some text in Flash content might not be displayed correctly
- Flash video playback when running in 64k colour mode will have strange 
  colour patterns rendered.
  Switching to 16 million colours for the screen display fixes this problem
- general stability is worse than when running in non-SMP mode

These SMP issues are known and being worked on. This seems to be a defect 
in the currently used customized ODIN code.

* Disable LIBPATHSTRICT: 

The ODIN environment cannot handle the LIBPATHSTRICT option. Do not use 
LIBPATHSTRICT to invoke your browser, or Flash 10 will not work properly.
LIBPATHSTRICT is for example used by Rich Walsh' utility RUN! and referring
to your browser with a L in the filename (for example: firefox!L.exe)
This restriction will be lifted in a future release.

* Some websites like http://www.jibjab.com and http://www.joecartoon.com 
  might crash the web browser.  

* Some Flash menu items, when clicked on do not work. This is true for 
  parts of Youtube movies.

* When you right click on any SWF content and select 'settings' the dialog 
  is corrupt or at least unusable.

* Certain Flash content is not displayed, for example movies from CBS 
  http://www.cbs.com/primetime/ncis/video/


How to uninstall Flash 10
=========================

- Start Warpin.exe and select the 3 Flash 10 items in Warpin for uninstall.

- Restore previous plugin DLLs: 

  When the Flash 10 installer detects Flash 5 (that ships with eComStation 
  1.2 and higher) in the plugin directory, it will rename it. The original 
  file is called npswf2.dll and will have been renamed to npswf2.dll.flash5.
  Remove the "flash5" portion from the file name so your old plugin will 
  work again.
  If you had the "unofficial" flash 7/9 installed remove the ".flash7" 
  portion from the file names (npswf2.dll, npswf32.dll and flashwin.dll), to 
  restore the functionality of your orginal Flash plugin.


Changelog
==========

28.03.2009:
 - odin (mscms): added mscms dll (required for Flash 10).
 - odin (kernel32): added missed apis for Flash 10
 - odin (urlmon): added missed apis for Flash 10 (stub)
 - plugin: removed unneeded XPCOM/JNI code. Decreased DLL size 3 times

01.04.2009:
 - plugin: Fixed Odin search via ODIN environment variable
 - odin (kernel32): Memory autocommit added to exception handler
 - odin (comctl32): added additional check for NULL pointer of DPA_GetPtr()

26.04.2009:
 - odin (kernel32):reworked autocommit. now its tries to commit page when 
   other autocommit workers are done (for example - dib section). 

12.05.2009:
 - fixed flash10 video

15.06.2009:
 - Wrapper now works only on registered eComStation 1.2 and higher systems

16.06.2009:
 - Created WARPIN installer

26.08.2009:
 - Fixed crash when click RMB on an Flash animations

26.09.2009:
 - Fixed crash when click About dialog and clicks on flash animations, 
   points on an new URLs

28.09.2009:
 - Fixed Hand cursor

06.10.2009:
 - Fixed text input

27.10.2009:
 - Fixed text input
 - Fixed umlaut in URL inputfield of the bowser
 - Fixed SMP issues

More information
================

Information on Software Subscription Services for eComStation can be found
at: http://www.ecomstation.com/subscription/


** (c) 2009 Mensys BV **

[eof]

